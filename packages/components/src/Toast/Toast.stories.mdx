import styled from 'styled-components'
import { Meta, Source, Canvas, Story } from '@storybook/addon-docs'
import { SecondaryButton } from '../buttons'
import { useState } from 'react'
import { Toast } from './Toast'

export const ToastToggler = ({ type, closable, retryable, children }) => {
  const [isVisible, setVisible] = useState(false)
  return (
    <>
      <br />
      <SecondaryButton onClick={() => setVisible(!isVisible)}>
        {isVisible ? 'Close' : 'Open'}
      </SecondaryButton>
      <Toast
        type={type}
        onClose={closable ? () => setVisible(false) : undefined}
        show={isVisible}
        onActionClick={retryable ? () => alert('Retried') : undefined}
        actionText="Retry"
      >
        {children}
      </Toast>
    </>
  )
}

<Meta title="Layout/Toast" component={Toast} />

# Toast

Toast is a message that pop ups from the bottom of the interface on a desktop, and from the top of the interface on mobile. It provides feedback on the outcome of an action.
Toast can be used inside any view, it doesn't have to be on the application root level element. Toast is an animated and position fixed `<Alert>`.

## Success

<Story name="Success" storyName="Success">
  <ToastToggler type="success">Hi! I'm a success toast</ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast type="success" show={isVisible}>
  Hi! I'm a success toast
</Toast>
    `}
/>

## Warning

<Story name="Warning" storyName="Warning">
  <ToastToggler type="warning">Hi! I'm a neutral toast</ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast type="neutral" show={isVisible}>
Hi! I'm a neutral toast
</Toast>
  `}
/>

## Error

<Story name="Error" storyName="Error">
  <ToastToggler type="Error">Hi! I'm an error toast</ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast type="warning" show={isVisible}>
  Hi! I'm an error toast
</Toast>
    `}
/>

## In progress

<Story name="In progress" storyName="In progress">
  <ToastToggler type="loading">Hi! I'm an in progress toast</ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast type="loading" show={isVisible}>
  Hi! I'm an in progress toast
</Toast>
    `}
/>

## Closable

<Story name="Closable" storyName="Closable">
  <ToastToggler type="loading" closable>
    Hi! I'm a closable toast
  </ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast
  type="success"
  show={isVisible}
  onClose={() => setVisible(false)}
>
  Hi! I'm a closable toast
</Toast>
    `}
/>

## Retryable

<Story name="Retryable" storyName="Retryable">
  <ToastToggler type="error" retryable>
    Hi! I'm a retryable toast
  </ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast
  type="success"
  show={isVisible}
  onActionClick={() => alert('Retried')}
  actionText="Retry"
>
  Hi! I'm a retryable toast
</Toast>
    `}
/>

## Retryable and closable

<Story name="Retryable and closable" storyName="Retryable and closable">
  <ToastToggler type="error" retryable closable>
    Hi! I'm a retryable and closable toast
  </ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast
  type="success"
  show={isVisible}
  onActionClick={() => alert('Retried')}
  actionText="Retry"
  onClose={() => setVisible(false)}
>
  Hi! I'm a retryable toast
</Toast>
    `}
/>

## Long text, retryable and closable

<Story
  name="Long text, retryable and closable"
  storyName="Long text, retryable and closable"
>
  <ToastToggler type="error" retryable closable>
    Hi! I'm a retryable and closable toast. I also have a very long text within
    the toast. This illustrates how the toast stretches when the content is
    lengthy.
  </ToastToggler>
</Story>

<Source
  dark
  code={`
<Toast
  type="success"
  show={isVisible}
  onActionClick={() => alert('Retried')}
  actionText="Retry"
  onClose={() => setVisible(false)}
>
  Hi! I'm a retryable and closable toast. I also have a very long text within
  the toast. This illustrates how the toast stretches when the content is
  lengthy.
</Toast>
    `}
/>
